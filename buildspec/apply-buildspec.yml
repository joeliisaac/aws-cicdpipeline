version: 0.2
phases:
  install:
    commands:
    - sudo apt-get install python3.7 
    - pip3 install awscli --upgrade --user
    - pip3 install checkov
    
  pre_build:
    commands:
      - terraform init
      - terraform validate
      
  
  build:
    commands:
      - checkov --directory ./
      - terraform apply --auto-approve

post_build:
    commands:
      - echo "Checkov test is completed on `date`"


      